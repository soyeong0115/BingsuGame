<!DOCTYPE html>
<html>
    <style type = "text/css"> 
        a {
            text-decoration: underline rgba(255, 255, 255, 0);
            font-size: 100px;
            padding: 10px;
            margin: 50px;
        }
        #farm {
            height: 700px;
            background-image: url('img/background.png');
            position: relative;
            
        }
        #field {
            margin: auto;
            justify-content: center;
            width: 1100px;
            display: flex; 
            border: 5px outset #2d2d2d;
        }
        #field img {
            margin: 0; 
        }
        h1 {
            font-size: 70px;
            text-shadow: 4px 4px 1px rgb(0, 0, 0);
            color: rgb(255, 255, 255);
        }
        h2 {
            font-size: 75px;
            text-shadow: 4px 4px 1px rgb(0, 0, 0);
            color: rgb(101, 131, 164);
        }
        footer {
            font-family: "Îë•Í∑ºÎ™®Íº¥";
            font-size: 12px;
        }
        .text {
            color: black;
            text-align: center;
            font-family: "Îë•Í∑ºÎ™®Íº¥";
        }
        section {
            display: flex;
            justify-content: center;
        }
        .container {
            padding: 10px;
            background-color: #ffffff57;
            border-radius: 10px;
            width: 500px;
            margin: auto;
        }
        .container2 {
            padding: 10px;
            background-color: #ffffff57;
            border-radius: 10px;
            width: 500px;
            height: 500px;
            margin: auto;
        }
        #score {
            background-color: rgba(255, 255, 255, 0.475);
            border: 6px solid #47010199;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px rgb(9, 73, 40);
            width: 130px;
            height: 45px;
        }
        
        .number {
            font-size: 30px;
            color: rgb(0, 0, 0);
            margin: auto;
        }
        .cashNumber{
            font-size: 30px;
            color: rgb(0, 0, 0);
            margin: auto;
        }
        .BingsuNumber{
            font-size: 30px;
            color: rgb(0, 0, 0);
            margin: auto;
        }
        #BingsuNumber{
            background-color: rgba(255, 255, 255, 0.475);
            border: 6px solid #f9989881;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px #fff1e8a4;
            width: 130px;
            height: 45px;
        }
        #finalMoney {
            background-color: rgba(255, 255, 255, 0.475);
            border: 6px solid #ffbb0081;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px rgb(90, 37, 2);
            width: 130px;
            height: 45px;
        }
        button {
            width: 80px;
            height: 80px;
            border: none;
            border-radius: 8px;
            margin: 12px;
            cursor: move;
            font-size: 50px;
            background: #ffffffb5;
            box-shadow: 5px 5px 1px rgb(39, 39, 39);
            transition: bottom 10ms ease-in,
                        box-shadow 10ms ease-in;
        }
        button:hover {
            bottom: 15px;
            box-shadow: rgba(255, 255, 255, 0.15) 0px 5px 15px 0px;
        }
        img.dragging-over {
            border: 2px solid white;
        }
        #timer {
            background-color: rgba(255, 255, 255, 0.733);
            border: 6px solid #b1ecff99;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px rgb(4, 48, 65);
            width: 200px;
            height: 45px;
        }
        .timerNumber {
            color: rgb(90, 90, 90);
            font-size: 40px;
            margin: auto;
        }
        #horizontal {
            display: flex; 
            justify-content: center;
            gap: 20px; 
        }

        #making {
            width: 1300px;
            height: 900px;
            background-image: url("img/cafe2.png");
            background-size: cover;
            background-position: center;
            position: relative;
        }

/* ÎπôÏàòÏû¨Í≥†Î∂ÄÎ∂Ñ */
.BingsuNumber{
            font-size: 30px;
            color: rgb(0, 0, 0);
            margin: auto;
        }
#BingsuNumber{
            background-color: rgba(255, 255, 255, 0.475);
            border: 6px solid #f9989881;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px #fff1e8a4;
            width: 130px;
            height: 45px;
        }

/* ÌòÑÍ∏àÎ∂ÄÎ∂Ñ */
#finalMoney {
            background-color: rgba(255, 255, 255, 0.475);
            border: 6px solid #ffbb0081;
            border-radius: 50px;
            border-style: outset;
            box-shadow: 4px 4px 1px rgb(90, 37, 2);
            width: 130px;
            height: 45px;
        }



/* Í∞ÄÍ≤å Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞ */
.shop-background {
    position: relative;
    height: 36vh;
    background-image: url('img/shop_background.png');
    background-size:1000px 1000px;
}

/* Í≥†Í∞ù ÏúÑÏπò */
.character {
    position: absolute;
    top: 96%;
    left: 70%;
    transform: translate(-50%, -50%);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100px;
}

/* Í≥†Í∞ù Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞ */
.customer-image {
    width: 350px;
    height: auto;
}

/* ÎÇòÌÉÄÎÇòÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò */
@keyframes appearAnimation {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* 1Ï¥à ÎèôÏïà ÏÇ¨ÎùºÏßÄÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò */
.hide-animation {
    animation: hideAnimation 500ms forwards;
}

/* 1ÏóêÏÑú 0ÏúºÎ°ú ÏÇ¨ÎùºÏßÄÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò */
@keyframes hideAnimation {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}


#gofarm:hover img {
            content: url("img/farmButton2.png");
        }
#gomaking:hover img {
            content: url("img/makingButton2.png");
        }
#gocash:hover img {
            content: url("img/cashButton2.png");
        }

        .box1 {
            padding: 10px;
            background-color: #ffffff96;
            border-radius: 10px;
            width: 550px;
            height: 520px;
            
            position: absolute;
            top: 13%;
            right: 14%;
            
        }
      
      .box2 {
          padding: 10px;
          background-color: #ffffff96;
          border-radius: 10px;
          width: 400px;
          height: 520px;
            
          position: absolute;
          top: 13%;
          left: 14%;
      }
      #space {
        width: 800px;
      }
      #cash {
        background-image: url("img/cashBackground.png");
      }
      #gameover {
        background-image: url("img/gameoverbackground.jpg");
        width: 800px;
        height: 300px;
        font-size: 130px;
        text-shadow: 5px 5px 1px rgb(61, 61, 61);
        color: rgb(111, 144, 190);
        margin: auto;
      }
      #mainButton {
        position: absolute;
        top: 510%;
        left: 45%;
        font-family: "Îë•Í∑ºÎ™®Íº¥";
        font-size: 30px;
        width: 130px;
        height: 45px;
        border: 3px;
        background-color: white;
        box-shadow: 5px 6px 1px rgb(27, 62, 84);
        border-radius: 8px;
      }
      #mainButton:hover {
            bottom: 15px;
            box-shadow: rgba(255, 255, 255, 0.15) 0px 5px 15px 0px;
        }
        #totalScore {
            position: absolute;
            top: 498%;
            left: 30%;
            font-size: 35px;
            text-shadow: 2px 2px 1px rgba(0, 0, 0, 0);
            color: rgb(219, 86, 86);
        }

    </style>
<head>
    <link rel="stylesheet" href="makebingsu.css"> 
    <meta charset="UTF-8">
</head>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<header>
    <title>Bingsu Game</title>
</header>

<!-- ÌòúÏ†ï -->
<br><br>
<div id="cash"  class="scroll-target">
<br><br>
        <div id="horizontal">
            <div id="timer"><p class="timerNumber">02:00</p></div>
            <div id="score"><p class="number">üçâ0</p></div>
            <div id="BingsuNumber"><p class="BingsuNumber">üç®0</p></div>
            <div id="finalMoney"><p class="cashNumber">ü™ô0</p></div>
        </div><br>

<section>
  <!-- Í≥†Í∞ù Ïù¥ÎØ∏ÏßÄ -->
  <div class="shop-background">
    <div id="clientQueue" class="character">
      <img src="img/person1.png" class="customer-image" alt="person_1" />
      <img src="img/person2.png" class="customer-image" alt="person_2" />
      <img src="img/person3.png" class="customer-image" alt="person_3" />
      <img src="img/person4.png" class="customer-image" alt="person_4" />
      <img src="img/person5.png" class="customer-image" alt="person_5" />
    </div>
  </div>

</section>


<section>
    <!-- ÏÑπÏÖò ÏöîÏÜå ÏãúÏûë -->
    <div id="horizontal">
        <a class="scroll-button"  id="gomaking"><img src = "img/makingButton1.png"></a>
        <div id="space"></div>
        <a class="scroll-button"  id="gofarm"><img src = "img/farmButton1.png"></a>
    </div>
</section>
</div>

<br><br><br><br><br><br>
<!-- ÏÜåÏòÅ -->
<div id="making" class="scroll-target">
    <body>
        <br>
        <div id="horizontal">
            <div id="timer"><p class="timerNumber">02:00</p></div>
            <div id="score"><p class="number">üçâ0</p></div>
            
            <!-- ÎπôÏàò Í∞úÏàòÎ•º ÌëúÏãúÌïòÎäî Î∂ÄÎ∂Ñ ÏóÖÎç∞Ïù¥Ìä∏ -->
            <div id="BingsuNumber"><p class="BingsuNumber">üç®0</p></div>
            <div id="finalMoney"><p class="cashNumber">ü™ô0</p></div>
        </div><br>
        
        <div class="box1"></div>
        <div class="box2"></div>

    <figure class="ricecake" onclick="showImage('img/bricecake.PNG')">
        <img class="ricecakeimg" src="img/ricecake.PNG" alt="ÎπôÏàòÎñ°"><br>
        <figurecaption class="name1"><p>ÎπôÏàòÎñ°</p></figurecaption>
    </figure>
    <figure class="watermelon" onclick="showImage('img/bwatermelon.PNG')">
        <img class="watermelonimg" src="img/watermelon.PNG" alt="ÏàòÎ∞ï"><br>
        <figurecaption class="name2"><p>ÏàòÎ∞ï</p></figurecaption>
    </figure>
    <figure class="redbean" onclick="showImage('img/bredbean.PNG')">
        <img class="redbeanimg" src="img/redbean.PNG" alt="Ìå•"><br>
        <figurecaption class="name3"><p><br>Ìå•</p></figurecaption>
    </figure>
    <figure class="ice" onclick="showImage('img/bice.PNG')">
        <img class="iceimg" src="img/ice.PNG" alt="ÏñºÏùå"><br>
        <figurecaption class="name4"><p>ÏñºÏùå</p></figurecaption>
    </figure>
    <figure class="milk" onclick="showImage('img/bmilk.PNG')">
        <img class="milkimg" src="img/milk.PNG" alt="Ïó∞Ïú†"><br>
        <figurecaption class="name5"><p>Ïó∞Ïú†</p></figurecaption>
    </figure>
    <figure class="jelly" onclick="showImage('img/bjelly.PNG')">
        <img class="jellyimg" src="img/jelly.PNG" alt="ÎπôÏàòÏ†§Î¶¨"><br>
        <figurecaption class="name9"><p>ÎπôÏàòÏ†§Î¶¨</p></figurecaption>
    </figure>
    <figure class="choco" onclick="showImage('img/bchoco.PNG')">
        <img class="chocoimg" src="img/choco.PNG" alt="Ï¥àÏΩîÎßõÏïÑÏù¥Ïä§ÌÅ¨Î¶º"><br>
        <figurecaption class="name6"><p>Ï¥àÏΩîÎßõ</p></figurecaption>
    </figure>
    <figure class="strawberry" onclick="showImage('img/bstrawberry.PNG')">
        <img class="strawberryimg" src="img/strawberry.PNG" alt="Îî∏Í∏∞ÎßõÏïÑÏù¥Ïä§ÌÅ¨Î¶º"><br>
        <figurecaption class="name7"><p>Îî∏Í∏∞Îßõ</p></figurecaption>
    </figure>
    <figure class="banila" onclick="showImage('img/bbanila.PNG')">
        <img class="banilaimg" src="img/banila.PNG" alt="Î∞îÎãêÎùºÎßõÏïÑÏù¥Ïä§ÌÅ¨Î¶º"><br>
        <figurecaption class="name8"><p>Î∞îÎãêÎùºÎßõ</p></figurecaption>
    </figure>
    
      <figure class="coin" onclick="sellBingsu()">
          <img class="coinimg" src="img/complete.PNG" alt="ÎπôÏàò ÌåêÎß§ÌïòÍ∏∞">
          <figurecaption class="cointext"><p></p></figurecaption>
      </figure>
    
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <div id="horizontal">
        <a class="scroll-button"  id="gocash"><img src = "img/cashButton1.png"></a>
        <div id="space"></div>
        <a class="scroll-button"  id="gofarm"><img src = "img/farmButton1.png"></a>
    </div>

      <!-- resetimg Ïù¥ÎØ∏ÏßÄ ÌÅ¥Î¶≠ Ïãú Ï∂îÍ∞ÄÎêú Ïù¥ÎØ∏ÏßÄÎì§ÏùÑ Î™®Îëê ÏÇ≠Ï†ú -->
      <img class="resetimg" src="img/reset.PNG" alt="Îã§Ïãú ÎßåÎì§Í∏∞" onclick="resetImages()">
        
      <div>
      <img class="dish" src="img/dish.PNG" alt="ÎπôÏàòÍ∑∏Î¶á">
      </div>
      
        <!-- Îã§Î•∏ Ïù¥ÎØ∏ÏßÄÎ•º ÌëúÏãúÌï† ÏöîÏÜå -->
        <div id="imageContainer">
          <!-- Ïù¥ÎØ∏ÏßÄÎ•º Ï∂îÍ∞ÄÌïòÏó¨ Î≥¥Ïù¥Í≤å Ìï® -->
        </div>
        
        <!-- <div id="coinCount">ÏΩîÏù∏ Í∞úÏàò: 0</div> ÎπôÏàò Ï†úÏûë ÌéòÏù¥ÏßÄÏóêÏÑú 'ÏΩîÏù∏ Í∞úÏàò' ÏÇ≠Ï†ú -->
        <!-- <img class="heart1" src="img/heart.PNG">
        <img class="heart2" src="img/heart.PNG">
        <img class="heart3" src="img/heart.PNG">
        <img class="heart4" src="img/heart.PNG">
        <img class="heart5" src="img/heart.PNG"> ÌïòÌä∏ Í∏∞Îä• ÏùºÎã®ÏùÄ ÏÇ≠Ï†ú (Ïù¥ÎØ∏ÏßÄ) -->
        </body>
</div>

<br><br><br><br><br><br>
<!-- ÏÑ∏ÏßÑ -->
<div id="farm"  class="scroll-target">
<body class="text"><br><br><br>
    <div id="horizontal">
        <div id="timer"><p class="timerNumber">02:00</p></div>
           
        <div id="score"><p class="number">üçâ0</p></div>
        <div id="BingsuNumber"><p class="BingsuNumber">üç®0</p></div>
        <div id="finalMoney"><p class="cashNumber">ü™ô0</p></div>
    </div><br><br><br><br>
    <section id="field"> 
        <img id="watermelon1" src="img/drySoil.png" alt="watermelon">
        <img id="watermelon2" src="img/drySoil.png" alt="watermelon">
        <img id="watermelon3" src="img/drySoil.png" alt="watermelon">
        <img id="watermelon4" src="img/drySoil.png" alt="watermelon">
        <img id="watermelon5" src="img/drySoil.png" alt="watermelon">
    </section><br><br><br>
    <section>
        <div>
            <a class="scroll-button"  id="gocash"><img src = "img/cashButton1.png"></a>
        </div>
        <div class="container">
            <button id="item1" draggable="true">ü´ó</button>
            <button id="item2" draggable="true">‚úÇÔ∏è</button>
            <button id="item3" draggable="true">üíõ</button>
            <button id="item4" draggable="true">üî™</button>
        </div>
        <div>
            <a class="scroll-button" id="gomaking"><img src = "img/makingButton1.png"></a>
        </div>
    </section>
    </div>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br>

    <div id="gameover">
        GAME OVER<br><strong id="totalScore"></strong>
        <input type="button" id="mainButton" onclick="goToMain()" value="MAIN">
    </div>
    <br><br><br><br><br><br><br><br><br><br><br><br>
<script>
        let startTime = 120;
        let totalCash = 0;

    // ÌÉÄÏù¥Î®∏ ÌëúÏãúÌï† ÏöîÏÜåÎì§ (NodeList)
    let timerElements = document.querySelectorAll(".timerNumber");

// ÌÉÄÏù¥Î®∏ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
    function updateTimer() {
        let minutes = Math.floor(startTime / 60);
        let seconds = startTime % 60;

        // Ïà´ÏûêÎ•º Îëê ÏûêÎ¶¨Î°ú ÌëúÏãú
        let formattedTime = `${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;

        // NodeList ÎÇ¥Ïùò Í∞Å ÏöîÏÜåÏóê ÎåÄÌï¥ ÏóÖÎç∞Ïù¥Ìä∏ Î∞òÎ≥µ
        timerElements.forEach(element => {
            element.textContent = formattedTime;
        });

        // 1Ï¥à Í∞êÏÜå
        startTime--;

        // ÏãúÍ∞ÑÏù¥ ÎÇ®ÏïÑÏûàÏúºÎ©¥ Í≥ÑÏÜç ÌÉÄÏù¥Î®∏ ÏóÖÎç∞Ïù¥Ìä∏
        if (startTime >= 0) {
            setTimeout(updateTimer, 1000);
        } else {
            let totalScore = document.getElementById("totalScore");
            totalScore.innerHTML = "Your Total Score: " + totalCash;
            document.getElementById("gameover").scrollIntoView({ behavior: "smooth" });
        }
    }

    // ÌÉÄÏù¥Î®∏ ÏãúÏûë
    updateTimer();

    function goToMain() {
        window.location.href = "BingsuGameMain.html";
    }
    const scrollButtons = document.querySelectorAll(".scroll-button");

    scrollButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetId = button.getAttribute("id").substring(2); // Removing "go" prefix
            document.getElementById(targetId).scrollIntoView({ behavior: "smooth" });
        });
    });

    const watermelon1 = document.getElementById("watermelon1");
    const watermelon2 = document.getElementById("watermelon2");
    const watermelon3 = document.getElementById("watermelon3");
    const watermelon4 = document.getElementById("watermelon4");
    const watermelon5 = document.getElementById("watermelon5");

    watermelon1.addEventListener("dragover", (e) => {
        e.preventDefault();
    });
    watermelon1.addEventListener("dragenter", dragEnter);
    watermelon1.addEventListener("drop", drop);

    watermelon2.addEventListener("dragover", (e) => {
        e.preventDefault();
    });
    watermelon2.addEventListener("dragenter", dragEnter);
    watermelon2.addEventListener("drop", drop);

    watermelon3.addEventListener("dragover", (e) => {
        e.preventDefault();
    });
    watermelon3.addEventListener("dragenter", dragEnter);
    watermelon3.addEventListener("drop", drop);

    watermelon4.addEventListener("dragover", (e) => {
        e.preventDefault();
    });
    watermelon4.addEventListener("dragenter", dragEnter);
    watermelon4.addEventListener("drop", drop);

    watermelon5.addEventListener("dragover", (e) => {
        e.preventDefault();
    });
    watermelon5.addEventListener("dragenter", dragEnter);
    watermelon5.addEventListener("drop", drop);
    
    const item1 = document.getElementById("item1");
    const item2 = document.getElementById("item2");
    const item3 = document.getElementById("item3");
    const item4 = document.getElementById("item4");

    const sumElements = document.querySelectorAll(".number");

    let isDragging = false;
    let draggedItem;
    
    item1.addEventListener("dragstart", (e) => {
        isDragging = true;
        e.dataTransfer.setData("text/plain", "item1");
        item1.classList.add("dragging");
        draggedItem = e.dataTransfer.getData("text/plain");
    });
    item2.addEventListener("dragstart", (e) => {
        isDragging = true;
        e.dataTransfer.setData("text/plain", "item2");
        item2.classList.add("dragging");
        draggedItem = e.dataTransfer.getData("text/plain");
    });
    item3.addEventListener("dragstart", (e) => {
        isDragging = true;
        e.dataTransfer.setData("text/plain", "item3");
        draggedItem = e.dataTransfer.getData("text/plain");
        item3.classList.add("dragging");
    });
    item4.addEventListener("dragstart", (e) => {
        isDragging = true;
        e.dataTransfer.setData("text/plain", "item4");
        draggedItem = e.dataTransfer.getData("text/plain");
        item4.classList.add("dragging");
    });

    const images = [
        {id: "watermelon1", count: 0, level: 1},
        {id: "watermelon2", count: 0, level: 1},
        {id: "watermelon3", count: 0, level: 1},
        {id: "watermelon4", count: 0, level: 1},
        {id: "watermelon5", count: 0, level: 1}
    ];

    let totalWM = 0
    function dragEnter(e){
        images.forEach((image) => {
            if (image.id === e.target.id){
                if (draggedItem === "item1") {
                    console.log("dragenter1");
                } else if (draggedItem === "item2" && image.level == 2) {
                    image.count++;
                    console.log(image.id + ": " + image.count + " " + image.level);
                    if (image.count === 1) {
                        e.target.src = "img/grass33.png";
                    } else if (image.count === 2){
                        e.target.src = "img/grass22.png";
                    }else if (image.count === 3){
                        e.target.src = "img/grass11.png";
                    }else {
                        e.target.src = "img/field.png";
                    }
                    if (image.count >= 4){
                        image.level = 3;
                    }
                }else if (draggedItem === "item3") {
                    console.log("dragEnter3");
                }else if (draggedItem === "item4" && image.level == 4) {
                    e.target.src = "img/resultWM.png";
                    setTimeout(function(){
                        let random = Math.floor(Math.random() * 3);
                        totalWM += random;
                        sumElements.forEach((element) => {
                            element.innerHTML = "üçâ" + totalWM;
                        });

                        if(random == 0){
                            e.target.src = "img/watermelon0.png";
                        }
                        else if(random == 1){
                            e.target.src = "img/watermelon1.png";
                        }
                        else if(random == 2){
                            e.target.src = "img/watermelon2.png";
                        }

                        setTimeout(function(){
                            e.target.src = "img/drySoil.png";
                            image.level = 1;
                        }, 1000);   
                    }, 1000);
                }
            }
        });
    }
    let brightnessValue = 1;

    function drop(e) {
        images.forEach((image) => {
            if (image.id === e.target.id){
                if (draggedItem === "item1" && image.level == 1) {
                    e.target.style.filter = `brightness(${0.3})`;
                    e.target.style.transition = "1s";
                    
                    setTimeout(function() {;
                        e.target.style = `brightness(${1})`;
                        e.target.src = "img/field.png";
                        setTimeout(function() {
                            e.target.src = "img/grass11.png";
                            setTimeout(function() {
                                e.target.src = "img/grass22.png";
                                setTimeout(function() {
                                    e.target.src = "img/grass33.png";
                                    setTimeout(function() {
                                        e.target.src = "img/grass44.png";
                                        image.level = 2;
                                    }, 100)
                                }, 100)
                            }, 100)
                        }, 500)
                    }, 1000);
                } else if (draggedItem === "item2") {
                    console.log("item2");
                }else if (draggedItem === "item3") {
                        image.count = 0;
                        if(image.level == 3){
                            e.target.src = "img/wm1.png";
                            setTimeout(function(){
                                        e.target.src = "img/wm2.png";
                                    setTimeout(function(){
                                        e.target.src = "img/wm3.png";
                                        image.level = 4;
                                    }, 200);
                            }, 200);
                        }else {
                            e.target.src = "img/rwm1.png";
                            setTimeout(function(){
                                        e.target.src = "img/rwm2.png";
                                    setTimeout(function(){
                                        e.target.src = "img/rwm3.png";
                                        setTimeout(function(){
                                            image.level = 1;
                                        }, 200);
                                    }, 200);
                            }, 200);
                        }
                    }
                }else if (draggedItem === "item4") {
                    console.log("item4");
                
                }
        });
    }
    var ingredients = []; // ÏÑ†ÌÉùÌïú Ïû¨Î£åÎ•º Ï†ÄÏû•Ìï† Î∞∞Ïó¥
      
    var correctFlavors = [
    ["img/bice.PNG", "img/bredbean.PNG", "img/bricecake.PNG", "img/bjelly.PNG", "img/bwatermelon.PNG", "img/bmilk.PNG", "img/bchoco.PNG"],
    ["img/bice.PNG", "img/bredbean.PNG", "img/bricecake.PNG", "img/bjelly.PNG", "img/bwatermelon.PNG", "img/bmilk.PNG", "img/bstrawberry.PNG"],
    ["img/bice.PNG", "img/bredbean.PNG", "img/bricecake.PNG", "img/bjelly.PNG", "img/bwatermelon.PNG", "img/bmilk.PNG", "img/bbanila.PNG"]
    ]; /* Ïò¨Î∞îÎ•∏ Ïû¨Î£å Î∞∞Ïó¥ ÏàòÏ†ï (ÏïÑÏù¥Ïä§ÌÅ¨Î¶ºÎßõ ÏÉÅÍ¥ÄÏóÜÏù¥) */
      
    


      
      
    
      
    function showImage(imageSrc) {
        
    
        
    var watermelonCountElement = document.querySelector("#score .number"); // ÏàòÎ∞ï Í∞úÏàòÎ•º ÎÇòÌÉÄÎÇ¥Îäî ÏöîÏÜå ÏÑ†ÌÉù
    var watermelonCount = parseInt(watermelonCountElement.textContent.substring(2)); // ÏàòÎ∞ï Í∞úÏàò Ï∂îÏ∂ú Î∞è Ï†ïÏàòÎ°ú Î≥ÄÌôò

    // ÎßåÏïΩ ÏàòÎ∞ï Í∞úÏàòÍ∞Ä 0Ïù¥Í≥† ÏàòÎ∞ï Ïù¥ÎØ∏ÏßÄÎ•º ÌÅ¥Î¶≠ÌïòÎ†§Í≥† ÌïúÎã§Î©¥ ÌÅ¥Î¶≠ Î¨¥Ïãú
    if (watermelonCount === 0 && imageSrc === 'img/bwatermelon.PNG') {
        alert("ÏàòÎ∞ï Ïû¨Î£åÍ∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§! ÏàòÎ∞ïÏùÑ Ïû¨Î∞∞Ìï¥Ï£ºÏÑ∏Ïöî");
        return;
    }
        
    var imageContainer = document.getElementById("imageContainer");
    var newImage = document.createElement("img");
    newImage.src = imageSrc;
    newImage.classList.add("bice"); // ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
    imageContainer.appendChild(newImage);

    // ÏÑ†ÌÉùÌïú Ïû¨Î£åÎ•º Î∞∞Ïó¥Ïóê Ï∂îÍ∞Ä
    ingredients.push(imageSrc);
        
    const figureElement = event.currentTarget;
    if (figureElement.classList.contains('watermelon')) {

        // totalWMÏóêÏÑú 1 Í∞êÏÜå
        totalWM -= 1;

        sumElements.forEach((element) => {
            element.innerHTML = "üçâ" + totalWM;
        });
    }

}
    var bingsuNumber = 0;
    function resetImages() {
      var imageContainer = document.getElementById("imageContainer");
      imageContainer.innerHTML = ""; // Ïù¥ÎØ∏ÏßÄÎì§ÏùÑ Î™®Îëê ÏÇ≠Ï†ú
      ingredients = []; // ÏÑ†ÌÉùÌïú Ïû¨Î£å Î∞∞Ïó¥ Ï¥àÍ∏∞Ìôî

    }

    function sellBingsu() {
    // ÏÑ†ÌÉùÌïú Ïû¨Î£å Î∞∞Ïó¥Í≥º Ïò¨Î∞îÎ•∏ Ïû¨Î£å Î∞∞Ïó¥ÏùÑ ÎπÑÍµêÌïòÏó¨ ÌåêÎß§ Ïó¨Î∂Ä Í≤∞Ï†ï
    var isCorrect = correctFlavors.some(correctFlavor =>
        ingredients.length === correctFlavor.length && ingredients.every((val, index) => val === correctFlavor[index])
    );

    if (isCorrect) {
        // ÌåêÎß§ ÏÑ±Í≥µ Ïãú ÎπôÏàò Í∞úÏàò Ï¶ùÍ∞Ä Î∞è ÏÑ†ÌÉùÌïú Ïû¨Î£å Ï¥àÍ∏∞Ìôî
        var bingsuCountElement = document.querySelectorAll(".BingsuNumber");
        bingsuNumber++;
        bingsuCountElement.forEach((element) => {
                            element.innerHTML = "üç®" + bingsuNumber;
                        });

        // Ïù¥ÌõÑ resetImages Ìï®Ïàò Ìò∏Ï∂úÌïòÏó¨ ÏÑ†ÌÉùÌïú Ïû¨Î£å Ï¥àÍ∏∞Ìôî
        resetImages();
    } else {
        alert("Ïù¥ ÎπôÏàòÎäî ÌåêÎß§Ìï† Ïàò ÏóÜÏäµÎãàÎã§! Îã§Ïãú ÎßåÎì§Ïñ¥Ï£ºÏÑ∏Ïöî");

        ingredients = []; // ÏÑ†ÌÉùÌïú Ïû¨Î£å Î∞∞Ïó¥ Ï¥àÍ∏∞Ìôî
        resetImages(); // Ïù¥ÎØ∏ÏßÄ Ïª®ÌÖåÏù¥ÎÑà Ï¥àÍ∏∞Ìôî
    }
}
    
    // ÏÑ†ÌÉùÌïú Ïû¨Î£å Î∞∞Ïó¥Í≥º Ïò¨Î∞îÎ•∏ Ïû¨Î£å Î∞∞Ïó¥ÏùÑ ÎπÑÍµêÌïòÏó¨ ÌåêÎß§ Ïó¨Î∂Ä Í≤∞Ï†ï
    /* if (ingredients.length === correctIngredients.length && ingredients.every((val, index) => val === correctIngredients[index])) {
      // ÌåêÎß§ ÏÑ±Í≥µ Ïãú ÏΩîÏù∏ Ï∂îÍ∞Ä Î∞è ÏïåÎ¶º
      coins += 100; // ÏΩîÏù∏ Í∞úÏàò Ï¶ùÍ∞Ä (Îã®ÏúÑ: 100)
      updateCoinCount(); // ÏΩîÏù∏ Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
      alert("ÎπôÏàòÎ•º ÌåêÎß§ÌïòÏó¨ 100ÏΩîÏù∏ÏùÑ ÌöçÎìùÌñàÏäµÎãàÎã§!");
      // Ïù¥ÌõÑ resetImages Ìï®Ïàò Ìò∏Ï∂úÌïòÏó¨ ÏÑ†ÌÉùÌïú Ïû¨Î£å Ï¥àÍ∏∞Ìôî
      resetImages();
    } else {
      if (hearts > 0) {
        // ÌïòÌä∏ Ïù¥ÎØ∏ÏßÄ Ï∞®Í∞ê
        var heartImage = document.querySelector(".heart" + hearts);
        heartImage.style.display = "none"; // Ìï¥Îãπ ÌïòÌä∏ Ïù¥ÎØ∏ÏßÄ Ïà®Í∏∞Í∏∞
        hearts--; // ÌïòÌä∏ Ï∞®Í∞ê
        alert("Ïù¥ ÎπôÏàòÎäî ÌåêÎß§Ìï† Ïàò ÏóÜÏäµÎãàÎã§! ÌïòÌä∏Î•º Ï∞®Í∞êÌï©ÎãàÎã§");
      } else {
        alert("ÌïòÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§! GAME OVER");
        // ÌïòÌä∏Í∞Ä Î™®Îëê Ï∞®Í∞êÎêêÏùÑ Í≤ΩÏö∞ Game Over -> Í≤åÏûÑÏò§Î≤Ñ ÌôîÎ©¥ÏúºÎ°ú Ï†ÑÌôò or Í≤åÏûÑÏ¥àÍ∏∞ ÌôîÎ©¥
      }

      ingredients = []; // ÏÑ†ÌÉùÌïú Ïû¨Î£å Î∞∞Ïó¥ Ï¥àÍ∏∞Ìôî
      resetImages(); // Ïù¥ÎØ∏ÏßÄ Ïª®ÌÖåÏù¥ÎÑà Ï¥àÍ∏∞Ìôî
    }
  } */
      
      
  // ÏΩîÏù∏ Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
  function updateCoinCount() {
    var coinCountElement = document.getElementById("coinCount");
    coinCountElement.textContent = "ÏΩîÏù∏ Í∞úÏàò: " + coins;
  }

// #Ïã†ÌòúÏ†ïÌååÌä∏

document.addEventListener("DOMContentLoaded", function() {
    const maxCustomersAtOnce = 3; // ÌôîÎ©¥Ïóê ÎèôÏãúÏóê ÎÇòÌÉÄÎÇ† ÏµúÎåÄ ÏÜêÎãò Ïàò
    const customerImages = document.querySelectorAll(".customer-image");
    const fadeInDuration = 1000; // ÏÑúÏÑúÌûà ÎÇòÌÉÄÎÇòÎäî Ìö®Í≥ºÏùò ÏßÄÏÜç ÏãúÍ∞Ñ (Î∞ÄÎ¶¨Ï¥à)

    let stockCount = document.querySelectorAll(".BingsuNumber"); // Ï¥àÍ∏∞ Ïû¨Í≥† Ïàò
    let cashCount = document.querySelectorAll(".cashNumber"); // Ï¥àÍ∏∞ ÌòÑÍ∏à Ïàò
    let currentCustomers = []; // ÌòÑÏû¨ ÏÜêÎãò Ïù∏Îç±Ïä§Î•º Ï†ÄÏû•ÌïòÎäî Î∞∞Ïó¥

    function startGame() {
        resetCustomers();
    }

    function resetCustomers() {
        // Ïù¥Ï†Ñ ÏÜêÎãòÍ≥º Ï£ºÎ¨∏ Ï¥àÍ∏∞Ìôî
        currentCustomers = [];
        customerImages.forEach(image => {
            image.style.display = "none";
            image.removeEventListener("click", handleCustomerClick);
        });

        // ÏÉàÎ°úÏö¥ ÎûúÎç§Ìïú ÏÜêÎãò ÏÑ†ÌÉù Î∞è ÌëúÏãú
        currentCustomers = selectRandomCustomers(maxCustomersAtOnce);
        currentCustomers.forEach(customerIndex => {
            customerImages[customerIndex].style.display = "block";
            customerImages[customerIndex].addEventListener("click", handleCustomerClick);
        });
    }

    function selectRandomCustomers(count) {
        const shuffledIndices = shuffleArray([...Array(5).keys()]);
        return shuffledIndices.slice(0, count);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function handleCustomerClick(event) {
        const customerIndex = Array.from(customerImages).indexOf(event.target);
        const orderCount = customerIndex + 1;

        // Ï£ºÎ¨∏Ïóê Ï∂©Î∂ÑÌïú Ïû¨Í≥†Í∞Ä ÏûàÎäîÏßÄ ÌôïÏù∏
        if (bingsuNumber >= orderCount) {
            placeOrder(orderCount);
            event.target.style.display = "none";
            checkOrdersCompleted();
        }
    }

    function checkOrdersCompleted() {
        if (currentCustomers.every(customerIndex => customerImages[customerIndex].style.display === "none")) {
            setTimeout(resetCustomersWithFadeIn, 2000);
        }
    }

    function resetCustomersWithFadeIn() {
        fadeInCustomers();
        setTimeout(resetCustomers, fadeInDuration);
    }

    function fadeInCustomers() {
        const interval = fadeInDuration / 20; // ÎÇòÌÉÄÎÇòÎäî ÏãúÍ∞Ñ Í∞ÑÍ≤© Í≥ÑÏÇ∞
        let opacity = 0;
        const fadeInInterval = setInterval(() => {
            opacity += 0.05; // Í∞Å Í∞ÑÍ≤©ÎßàÎã§ Î∂àÌà¨Î™ÖÎèÑ Ï¶ùÍ∞Ä
            customerImages.forEach(image => {
                image.style.opacity = opacity.toString();
            });
            if (opacity >= 1) {
                clearInterval(fadeInInterval);
            }
        }, interval);
    }
    
    function placeOrder(orderCount) {
        // Ï£ºÎ¨∏Ïóê Îî∞Îùº Ïû¨Í≥† Î∞è ÌòÑÍ∏à ÏóÖÎç∞Ïù¥Ìä∏
        bingsuNumber -= orderCount;
        totalCash += orderCount * 5;

        stockCount.forEach((element) => {
                            element.innerHTML = "üç®" + bingsuNumber;
                        });
        cashCount.forEach((element) => {
                            element.innerHTML = "ü™ô" + totalCash;
                        });
          }

    startGame();

});
</script>
</html>